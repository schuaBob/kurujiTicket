<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id="addConcert">新增演唱會</button>
    <button id="getData">get</button>
    <p id="text"></p>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
    $("#addConcert").click(function(){
        var obj = {
            concertName: "Jay Chou",
            supplierId: 001,
            location: "location",
            picture: "URL",
            seatpicture: "URL",
            endsellingtime: '2020-1-11 00:00:00',
            content: "內容",
            ticketstatus:{"data":[{"Area":"A","SeatTotal":"200","Sold":"0","Price":"1000"},{"Area":"B","SeatTotal":"300","Sold":"0","Price":"700"}]},
            concertstarttime: '2019-1-9 19:00:00',
            concertendtime: '2019-1-9 22:00:00'      
        }
        $.ajax({
            type: "POST",
            url: "api/concert.do",            
            cache: false,
            dataType: "json",
            contentType: "application/json",
            timeout: 5000,
            data:JSON.stringify(obj),
            success: function(response){                
                if(response.status == 200){
                    alert("成功");
                }                
            },
            error: function(err){
                alert("無法連線到伺服器！");
            }
        });
    });

    $("#getData").click(function(){
        $.ajax({
           type: "GET",
           url: "api/concert.do?session=chou", //session代表場次代號
           cache: false,
           dataType: "json",
           timeout: 5000,
           success: function(response){   
                if(response.status == 200 && response.isEmpty == "false"){
                    let data = JSON.parse(response.data);                    
                    //data是一個JSONArray，data = [JSONObject1,JSONObject2...];
                    for(var i=0; i<data.length;i++){
                        $("#text").append("<span>"+data[i].name+"</span><br>");
                    }
                }else{
                    alert("沒東西或有問題");
                }
           },
           error:function(err){
                alert("無法連線到伺服器！");
           }
        });
    });
</script>
</html>